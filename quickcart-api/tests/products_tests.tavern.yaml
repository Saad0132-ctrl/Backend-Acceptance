test_name: Products API Tests

stages:
  - name: Get all products
    request:
      url: http://localhost:3000/products
      method: GET
    response:
      status_code: 200
      json:
        - id: 1
          name: "Laptop"
          price: 1200
        - id: 2
          name: "Headphones"
          price: 150

  - name: Get product by valid ID
    request:
      url: http://localhost:3000/products/1
      method: GET
    response:
      status_code: 200
      json:
        id: 1
        name: "Laptop"
        price: 1200

  - name: Get product by invalid ID
    request:
      url: http://localhost:3000/products/999
      method: GET
    response:
      status_code: 404
      json:
        error: "Product not found"

  - name: Create new product - BUG DETECTED
    request:
      url: http://localhost:3000/products
      method: POST
      json:
        name: "Mouse"
        price: 25
    response:
      status_code: 200  # BUG: Should be 201
      json:
        id: 3
        name: "Mouse"
        price: 25

  - name: Create product without required fields
    request:
      url: http://localhost:3000/products
      method: POST
      json:
        name: "Incomplete"
    response:
      status_code: 400
      json:
        error: "Name and Price required"

  - name: Update existing product
    request:
      url: http://localhost:3000/products/1
      method: PUT
      json:
        name: "Gaming Laptop"
        price: 1500
    response:
      status_code: 200
      json:
        id: 1
        name: "Gaming Laptop"
        price: 1500

  - name: Update non-existent product
    request:
      url: http://localhost:3000/products/999
      method: PUT
      json:
        name: "Test"
        price: 100
    response:
      status_code: 404
      json:
        error: "Product not found"

  - name: Delete existing product
    request:
      url: http://localhost:3000/products/2
      method: DELETE
    response:
      status_code: 204